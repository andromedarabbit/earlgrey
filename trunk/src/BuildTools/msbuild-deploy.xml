<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Deploy" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

<PropertyGroup>
	<BuildCondition Condition=" '$(BuildCondition)' == '' ">Rebuild</BuildCondition>
</PropertyGroup>

<Import Project="msbuild.xml"/>

<!-- 배포 폴더 -->
<PropertyGroup>
	<DeploymentDir Condition="'$(DeploymentDir)' == ''">$(OutputDir)\Deployment</DeploymentDir>
	<MSBuildExtensionDeploymentDir>$(DeploymentDir)\MSBuildExtension</MSBuildExtensionDeploymentDir>
	<UnityBuildDeploymentDir>$(DeploymentDir)\UnityBuild</UnityBuildDeploymentDir>
</PropertyGroup>

<Target Name="Deploy" DependsOnTargets="$(BuildCondition);">
	<MSBuild 
		Projects="$(RootDir)\msbuild-deploy-msbuildextensions.xml" 
		Targets="CopyFiles" 
		Properties="DeploymentDir=$(MSBuildExtensionDeploymentDir);BinDir=$(BinDir)"
	/>
		
	<MSBuild 
		Projects="$(RootDir)\msbuild-deploy-unitybuild.xml" 
		Targets="CopyFiles" 
		Properties="DeploymentDir=$(UnityBuildDeploymentDir);BinDir=$(BinDir)"
	/>
		
	<CallTarget Targets="TestAlone" />
</Target>

</Project>
